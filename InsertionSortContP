import itertools as itr
import numpy as np
import matplotlib.pyplot as plt
import pandas as pn
def insertionSort(List):
    steps = 1
    for i in range(1,len(List)):
        temp = List[i]
        while i > 0 and temp < List[i - 1]:
            List[i] = List[i - 1]
            i = i - 1
            steps = steps + 3
        List[i] = temp
        steps = steps + 5
    return steps
def TimedDistribution(n):
    prtm = list(itr.permutations(np.array(range(n))))
    times = []
    for i in range(len(prtm)):
        times.append(insertionSort(list(prtm[i])))
    return np.array(times)
def PlotDistribution(n):
    times = TimedDistribution(n)
    v = np.array(sorted(list(set(times))))
    Series = plt.hist(times, len(v))
    numPerm = np.array(list(Series[0]))
    plt.bar(v, numPerm)
    plt.xlabel('Complejidad de tiempo')
    plt.ylabel('Frecuencia')
    prob = numPerm*(1/numPerm.sum())
    Tabla = pn.concat([pn.Series(v, name='t'),pn.Series(prob, name='P(t)'), pn.Series(numPerm, name = 'Frequency')], axis=1)
    Resumen = pn.concat([pn.Series([v.min()], name = 'Mejor Caso'), pn.Series([v.max()], name= 'Peor Caso'), pn.Series([v.mean()], name='Caso Promedio')], axis=1)
    return [Tabla.loc[:,['t','P(t)','Frequency']], Resumen.loc[:,['Mejor Caso', 'Peor Caso', 'Caso Promedio']]]
